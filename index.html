<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🏫 NU:CLASS - 반편성 프로그램</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-K0F0RV1BY8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-K0F0RV1BY8');
    </script>


</head>
<body>

    <!-- ========== 로그인 화면 ========== -->
    <div id="loginScreen" class="screen">
        <div class="login-container">
            <h1>🏫 NU:CLASS</h1>
            <h3>학생 반편성 지원 프로그램</h3>
            <p class="login-notice">※ 비밀번호는 최초 로그인 시 자동 등록됩니다.<br>꼭 기록해두세요!</p>
            
            <form id="loginForm">
                <input type="text" id="schoolNameInput" list="schoolNameList" placeholder="학교 이름 (예: 한국고등학교)" required autocomplete="off">
                <datalist id="schoolNameList"></datalist>
                
                <input type="text" id="gradeInput" list="gradeList" placeholder="학년 입력 (예: 2학년)" required autocomplete="off">
                <datalist id="gradeList"></datalist>
                
                <input type="password" id="passwordInput" placeholder="비밀번호 (숫자 5자리)" maxlength="5" required>
                <button type="submit" class="login-button">로그인</button>
            </form>
            
            <div id="loginMessage"></div>
        </div>
    </div>

    <!-- ========== 대시보드 화면 ========== -->
    <div id="dashboardScreen" class="screen" style="display: none;">
        <div class="container">
            
            <!-- 상단 학교 정보 -->
            <div class="school-info">
                <h2 id="schoolInfoText">학교명 - 학년</h2>
            </div>
            <h1>학생 반편성 지원 프로그램 📲NU:CLASS</h1>

            <!-- 고정 헤더 영역 -->
            <div class="sticky-header">
                
                <!-- 버튼 그룹 -->
                <div class="button-group">
                    <label for="pdfUpload" class="btn btn-orange">PDF 파일 선택</label>
                    <input type="file" id="pdfUpload" accept=".pdf" style="display: none;">
                    
                    <button id="globalSwapButton" class="btn btn-green" disabled>바꾸기</button>
                    <button id="globalMoveButton" class="btn btn-purple" disabled>다른 반 이동</button>
                    <button id="undoButton" class="btn btn-gray" disabled>되돌리기</button>
                    <button id="sortByNameButton" class="btn btn-violet" disabled>학생 재정렬</button>
                    <button id="downloadPdfButton" class="btn btn-red" disabled>PDF(확인용) 다운로드</button>
                    <button id="downloadPdfPublicButton" class="btn btn-orange" disabled>PDF(공지용) 다운로드</button>
                    <button id="downloadExcelButton" class="btn btn-blue" disabled>엑셀(나이스용) 다운로드</button>
                    <button id="backupButton" class="btn btn-teal" disabled>백업</button>
                    <button id="restoreButton" class="btn btn-teal">복원</button>
                    <input type="file" id="jsonUpload" accept=".json" style="display: none;">
                    <button id="resetDataButton" class="btn btn-danger" disabled>데이터 초기화</button>
                    <button id="logoutButton" class="btn btn-dark">로그아웃</button>
                </div>

                <!-- 현재 현황 통계 테이블 -->
                <div id="statsContainer">
                    <div class="stats-header">
                        <h2>통계</h2>

                        <!-- 옵션 영역 (우측 배치) -->
                        <div class="stats-options">
                            <span class="view-mode-title">보기 방식</span>

                            <span class="option-label">그리드</span>

                            <label class="seg-radio">
                                <input type="radio" name="gridColumns" value="2" checked>
                                <span>2</span>
                            </label>

                            <label class="seg-radio">
                                <input type="radio" name="gridColumns" value="3">
                                <span>3</span>
                            </label>

                            <label class="seg-radio">
                                <input type="radio" name="gridColumns" value="4">
                                <span>4</span>
                            </label>

                            <label class="seg-check">
                                <input type="checkbox" id="showBirthdate" checked>
                                <span>생년월일</span>
                            </label>

                            <label class="seg-check">
                                <input type="checkbox" id="showGender" checked>
                                <span>성별</span>
                            </label>

                            <label class="seg-check">
                                <input type="checkbox" id="showSpecial" before>
                                <span>메모</span>
                            </label>
                        </div>
                    </div>

                    <table id="currentStats">
                        <thead></thead>
                        <tbody></tbody>
                    </table>
                </div>


            </div>

            <!-- 반별 학생 목록 컨테이너 -->
            <div id="dropZone" class="drop-zone">
                <div id="classesContainer" class="class-container"></div>
            </div>

            <!-- 변경 이력 -->
            <div id="historyContainer">
                <h2>변경 이력</h2>
                <ul id="historyList"></ul>
            </div>

        </div>
    </div>

    <!-- PDF.js 라이브러리 (PDF 파싱용) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    
    <!-- SheetJS 라이브러리 (엑셀 생성용) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <!-- jsPDF 라이브러리 (PDF 생성용) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>

    <!-- 한글 폰트(Base64) -->
    <script src="nuclass_font.js"></script>

    <!-- 메인 스크립트 -->
    <script src="app.js"></script>

</body>
</html>